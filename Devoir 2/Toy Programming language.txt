<!DOCTYPE html>
<html>

<body>

    <p id="text">v1 = 5346;
        <br> v2 = 10 ;
        <br> v3 = 990;
        <br> adunare1 = v1 + 100;
        <br> adunare2 = v3 + 48;
        <br> adunare3 = v2 + 11;
        <br> adunare4 = v1 + 55;
 </p>


    <button onclick="obviously()">Parse</button>

    <p id="demo"></p>

    <script>
        function obviously() {

            text = document.getElementById("text").innerHTML.split('<br>');

            //Regex and syntax
            //================
            var declarationRegex = /([a-zA-Z_]+|[a-zA-Z_]+\w+)\s*\=\s*(\d+)\s*\;/;
            var declarationSyntax;

            var additionRegex = /([a-zA-Z_]+|[a-zA-Z_]+\w+)\s*\=\s*([a-zA-Z_]+|[a-zA-Z_]+\w+)\s*\+\s*(\d+)\s*\;/;
            var additionSyntax;
            //================



            //Variables and values extraction
            //================
            var variableDeclarations = [];
            var variableValues = [];

            var additionPreDeclarations = [];
            var additionPostDeclarations = [];
            var additionVariables = [];

            for (i = 0; i < text.length; i++) {

                if (declarationRegex.test(text[i])) {
                    declarationSyntax = declarationRegex.exec(text[i]);

                    variableDeclarations.push(declarationSyntax[1]);
                    variableValues.push(declarationSyntax[2]);

                } else if (additionRegex.test(text[i])) {
                    additionSyntax = additionRegex.exec(text[i]);

                    additionPreDeclarations.push(additionSyntax[1]);
                    additionPostDeclarations.push(additionSyntax[2]);
                    additionVariables.push(additionSyntax[3]);
                } else {
                    document.writeln("<span style=\"color:red;\">> Syntax error on line " + (i + 1) + "<\/span>"); 
                    document.writeln('<br>');

                }

            }
            //================


            //Where magic happens
            //================
            var variableIsDeclared = false;
            //var addition;

            for (i = 0; i < additionPreDeclarations.length; i++) {
                for (j = 0; j < variableDeclarations.length; j++) {
                    if (variableDeclarations[j] == additionPostDeclarations[i]) {
                        declaredVariableValue = variableValues[j];
                        variableIsDeclared = true;
                        break;
                    }
                    else{
                        variableIsDeclared = false;
                    }
                }
                if (variableIsDeclared) {
                    addition = parseInt(declaredVariableValue) + parseInt(additionVariables[i]);
                    document.writeln(additionPreDeclarations[i] + "=" + addition);
                    document.writeln('<br>');
                } else {
                    document.writeln("<span style=\"color:red;\"> > ERROR ! Cannot print '" + additionPreDeclarations[i] + "'. Variable '" + additionPostDeclarations[i] + "' is not declared <\/span>");
                    document.writeln('<br>');
                }
            }
            //================

        }
    </script>

</body>

</html>