<!DOCTYPE html>
<html>

<body>

    <p id="text">v1 = 5346;
        <br> v2 = 10 ;
        <br> var = v2 + 10;
        <br> var2 = v1 + 100000;
        <br> ceva = 555 + v1;
    </p>


    <button onclick="obviously()">Parse, calculate and print</button>

    <p id="demo"></p>

    <script>
        function obviously() {

            text = document.getElementById("text").innerHTML.split('<br>');

            //Regex and syntax
            //================
            var declarationRegex = /([a-zA-Z_]+|[a-zA-Z_]+\w+)\s*\=\s*(\d+)\s*\;/;
            var declarationSyntax;

            var additionRegex = /([a-zA-Z_]+|[a-zA-Z_]+\w+)\s*\=\s*([a-zA-Z_]+|[a-zA-Z_]+\w+)\s*\+\s*(\d+)\s*\;/;
            var additionSyntax;

            var inversedAdditionRegex = /([a-zA-Z_]+|[a-zA-Z_]+\w+)\s*\=\s*(\d+)\s*\+\s*([a-zA-Z_]+|[a-zA-Z_]+\w+)\s*\;/;
            var inversedAdditionSyntax;
            //================



            //Variables and values extraction
            //================
            var variableDeclarations = [];
            var variableValues = [];

            var additionPreDeclarations = [];
            var additionPostDeclarations = [];
            var additionVariables = [];

            var inversedAdditionPreDeclarations = [];
            var inversedAdditionPostDeclarations = [];
            var inversedAdditionVariables = [];

            for (i = 0; i < text.length; i++) {

                if (declarationRegex.test(text[i])) {
                    declarationSyntax = declarationRegex.exec(text[i]);

                    variableDeclarations.push(declarationSyntax[1]);
                    variableValues.push(declarationSyntax[2]);

                } else if (additionRegex.test(text[i])) {
                    additionSyntax = additionRegex.exec(text[i]);

                    additionPreDeclarations.push(additionSyntax[1]);
                    additionPostDeclarations.push(additionSyntax[2]);
                    additionVariables.push(additionSyntax[3]);
                } else if (inversedAdditionRegex.test(text[i])) {
                    inversedAdditionSyntax = inversedAdditionRegex.exec(text[i]);
                    inversedAdditionPreDeclarations.push(inversedAdditionSyntax[1]);
                    inversedAdditionVariables.push(inversedAdditionSyntax[2]);
                    inversedAdditionPostDeclarations.push(inversedAdditionSyntax[3]);

                } else {
                    document.writeln("<span style=\"color:red;\">> Syntax error on line " + (i + 1) + "<\/span>");
                    document.writeln('<br>');

                }

            }
            //================


            //Where magic happens
            //================
            var variableIsDeclared = false;
            //var addition;

            for (i = 0; i < additionPreDeclarations.length; i++) {
                for (j = 0; j < variableDeclarations.length; j++) {
                    if (variableDeclarations[j] == additionPostDeclarations[i]) {
                        declaredVariableValue = variableValues[j];
                        variableIsDeclared = true;
                        break;
                    } else {
                        variableIsDeclared = false;
                    }
                }
                if (variableIsDeclared) {
                    addition = parseInt(declaredVariableValue) + parseInt(additionVariables[i]);
                    document.writeln(additionPreDeclarations[i] + "=" + addition);
                    document.writeln('<br>');
                } else {
                    document.writeln("<span style=\"color:red;\"> > ERROR ! Cannot print '" + additionPreDeclarations[i] + "'. Variable '" + additionPostDeclarations[i] + "' is not declared <\/span>");
                    document.writeln('<br>');
                }
            }


            for (i = 0; i < inversedAdditionPreDeclarations.length; i++) {
                for (j = 0; j < variableDeclarations.length; j++) {
                    if (variableDeclarations[j] == inversedAdditionPostDeclarations[i]) {
                        declaredVariableValue = variableValues[j];
                        variableIsDeclared = true;
                        break;
                    } else {
                        variableIsDeclared = false;
                    }
                }
                if (variableIsDeclared) {
                    addition = parseInt(declaredVariableValue) + parseInt(inversedAdditionVariables[i]);
                    document.writeln(inversedAdditionPreDeclarations[i] + "=" + addition);
                    document.writeln('<br>');
                } else {
                    document.writeln("<span style=\"color:red;\"> > ERROR ! Cannot print '" + inversedAdditionPreDeclarations[i] + "'. Variable '" + inversedAdditionPostDeclarations[i] + "' is not declared <\/span>");
                    document.writeln('<br>');
                }
            }
            //================

        }
    </script>

</body>

</html>